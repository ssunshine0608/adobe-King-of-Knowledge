<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
  />
  <title>Adobe 知識王挑戰賽</title>

  <!-- React / Babel / Tailwind -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111827;
      font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      user-select: none;
      -webkit-user-select: none;
      -webkit-touch-callout: none;
    }
    ::-webkit-scrollbar {
      display: none;
    }

    .touch-highlight {
      transition: background-color 0.1s;
    }
    .touch-highlight:active {
      background-color: rgba(255, 255, 255, 0.25);
      border-radius: 16px;
    }

    /* 解析浮層 */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
      z-index: 999;
    }
    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
    .explanation-card {
      background: #1f2937;
      padding: 20px 22px;
      width: 85%;
      max-width: 360px;
      border-radius: 18px;
      color: #f9fafb;
      transform: translateY(10px);
      transition: transform 0.25s ease;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
    }
    .overlay.show .explanation-card {
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    // -----------------------------
    //   設定區
    // -----------------------------

    // GitHub Pages 子路徑
    const BASE_PATH = "/adobe-King-of-Knowledge/";

    // 點擊區域百分比（你之前調好的）
    const CLICK_AREA_TOP_PERCENT = 29;
    const CLICK_AREA_HEIGHT_PERCENT = 65;
    const CLICK_AREA_LEFT_PERCENT = 7;
    const CLICK_AREA_WIDTH_PERCENT = 86;

    const LINE_BOT_ID = "@your_bot_id"; // 之後換成你的 OA ID
    const COVER_IMAGE = "fengmian.jpg";

    function getImagePath(fileName) {
      return BASE_PATH + fileName;
    }

    // 題目（0 = A, 1 = B, 2 = C, 3 = D）
    const QUESTIONS = [
      {
        id: 1,
        image: "q1.jpg",
        correct: 1,
        explanation:
          "Adobe 的生成式 AI 家族稱為 Firefly，以商用安全與高品質輸出聞名，能在多款 Adobe 工具中直接使用。"
      },
      {
        id: 2,
        image: "q2.jpg",
        correct: 1,
        explanation:
          "Firefly 的訓練資料來自 Adobe Stock 與授權內容，避免侵權風險，是企業最重視的 AI 商用優勢。"
      },
      {
        id: 3,
        image: "q3.jpg",
        correct: 0,
        explanation:
          "文字生成影片能讓圖像快速動起來，適合做社群素材或提案動態，無須專業剪輯也能快速產出。"
      },
      {
        id: 4,
        image: "q4.jpg",
        correct: 2,
        explanation:
          "生成點數（Generative Credits）用來計算 AI 使用量，讓團隊更容易管理與控管資源。"
      },
      {
        id: 5,
        image: "q5.jpg",
        correct: 1,
        explanation:
          "Firefly 圖片含內容憑證（Content Credentials），可追溯來源，提高透明度，適用品牌與商用需求。"
      }
    ];

    // -----------------------------
    //   React App
    // -----------------------------
    function App() {
      const [gameState, setGameState] = React.useState("start"); // start | playing | result
      const [currentQIndex, setCurrentQIndex] = React.useState(0);
      const [score, setScore] = React.useState(0);
      const [userId, setUserId] = React.useState("");

      // 解析浮層狀態
      const [showExplanation, setShowExplanation] = React.useState(false);
      const [lastIsCorrect, setLastIsCorrect] = React.useState(false);
      const [isLock, setIsLock] = React.useState(false);

      // 解析 URL 中的 uid（之後你要記錄分數時可以用）
      React.useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const uid = params.get("uid");
        if (uid) setUserId(uid);
      }, []);

      const startGame = () => {
        setGameState("playing");
        setScore(0);
        setCurrentQIndex(0);
        setIsLock(false);
        setShowExplanation(false);
      };

      const handleAnswer = (op
