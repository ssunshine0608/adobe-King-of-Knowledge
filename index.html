<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Adobe çŸ¥è­˜ç‹æŒ‘æˆ°è³½</title>
    
    <!-- React & Babel & Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            background-color: #2D2D2D;
            font-family: 'Noto Sans TC', sans-serif;
        }
        .touch-highlight {
            transition: background-color 0.1s;
        }
        .touch-highlight:active {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 12px;
        }
        /* éš±è—æ²è»¸ */
        ::-webkit-scrollbar {
            display: none;
        }

        /* è§£ææµ®å±¤ */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
        }

        .overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .explanation-card {
            background: #111827;
            color: #f9fafb;
            padding: 20px 22px;
            border-radius: 18px;
            max-width: 360px;
            width: 88%;
            box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
            transform: translateY(10px);
            transition: transform 0.25s ease;
        }

        .overlay.show .explanation-card {
            transform: translateY(0);
        }

        .explanation-card h2 {
            font-size: 20px;
            margin-bottom: 8px;
            font-weight: 800;
        }

        .explanation-card p {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .explanation-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            opacity: 0.85;
        }

        .explanation-next-btn {
            padding: 8px 14px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            background: linear-gradient(135deg, #f97316, #ec4899);
            color: #fff;
            transition: transform 0.1s ease, box-shadow 0.1s ease;
            box-shadow: 0 10px 18px rgba(0, 0, 0, 0.25);
        }

        .explanation-next-btn:active {
            transform: scale(0.96);
            box-shadow: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // â˜… è¨­å®šå€ â˜…
        // ==========================================
        
        // ã€å°ˆæ¡ˆè·¯å¾‘ã€‘GitHub Pages çš„å°ˆæ¡ˆåç¨±ï¼Œç”¨æ–¼æ§‹é€ æ­£ç¢ºçš„åœ–ç‰‡è·¯å¾‘
        const BASE_PATH = "/adobe-King-of-Knowledge/";
        
        // ã€é»æ“Šå€åŸŸåƒæ•¸ã€‘T:29, H:65, L:7, W:86 - é€™æ˜¯æ‚¨èª¿æ•´å¥½çš„ç²¾æº–ä½ç½®
        const CLICK_AREA_TOP_PERCENT = 29;    
        const CLICK_AREA_HEIGHT_PERCENT = 65; 
        const CLICK_AREA_LEFT_PERCENT = 7;    
        const CLICK_AREA_WIDTH_PERCENT = 86;  

        // ==========================================
        
        const LINE_BOT_ID = "@your_bot_id"; 

        // é¡Œç›®ï¼ˆåŠ ä¸Š explanation æ¬„ä½ï¼Œå…§å®¹å¯ä»¥è‡ªå·±æ”¹ï¼‰
        const QUESTIONS = [
            { 
                id: 1, 
                image: "q1.jpg", 
                correct: 1,
                explanation: "Adobe çš„ç”Ÿæˆå¼ AI æŠ€è¡“çµ±ç¨±ç‚º â€œFirefly æ¨¡å‹å®¶æ—â€ï¼Œåå­—éˆæ„Ÿä¾†è‡ªã€Œè¢ç«èŸ²é»äº®å‰µæ„ã€ã€‚Firefly çš„ç‰¹è‰²æ˜¯ç‚ºå‰µä½œè€…æ‰“é€ ï¼ŒåŒ…å«é«˜å“è³ªç´°ç¯€ã€å•†ç”¨å®‰å…¨çš„è¨“ç·´æ•¸æ“šï¼Œä»¥åŠèƒ½èå…¥ Photoshopã€Illustratorã€Express å…§çš„å·¥ä½œæµç¨‹ã€‚Firefly ä¹Ÿæ˜¯ç›®å‰å”¯ä¸€åœ¨ä¼æ¥­ç´šç’°å¢ƒä¸­ç‰¹åˆ¥å¼·èª¿æˆæ¬Šé€æ˜åº¦èˆ‡å…§å®¹è²¬ä»»çš„ç”Ÿæˆå¼ AIã€‚"
            }, 
            { 
                id: 2, 
                image: "q2.jpg", 
                correct: 1,
                explanation: "é€™é¡Œæƒ³æé†’ä½ ï¼šé€éç”Ÿæˆå¼ AIï¼Œå¯ä»¥åœ¨æ—¢æœ‰ç´ æä¸Šå¿«é€Ÿå»¶ä¼¸å¤šç¨®ç‰ˆæœ¬ï¼Œç¯€çœå¤§é‡å˜—è©¦æ™‚é–“ã€‚"
            },
            { 
                id: 3, 
                image: "q3.jpg", 
                correct: 0,
                explanation: "å¾ˆå¤šäººæœƒè¢«é€™é¡Œèª¤å°ã€‚å¯¦å‹™ä¸Šï¼Œå–„ç”¨é›²ç«¯è³‡æºèˆ‡å…±äº«ç©ºé–“ï¼Œæ‰èƒ½è®“åœ˜éšŠä¸€èµ·çœ‹åˆ°åŒä¸€å¥—ç´ æç‰ˆæœ¬ã€‚"
            },
            { 
                id: 4, 
                image: "q4.jpg", 
                correct: 2,
                explanation: "æ­£ç¢ºç­”æ¡ˆæ˜¯å·¦ä¸‹è§’ã€‚é€™é¡Œä¸»è¦åœ¨èªªæ˜ Adobe å·¥å…·å¯ä»¥å¾ã€éˆæ„Ÿ â†’ è¦–è¦º â†’ è¼¸å‡ºã€ä¸€æ¬¡æ•´åˆã€‚"
            },
            { 
                id: 5, 
                image: "q5.jpg", 
                correct: 1,
                explanation: "æœ€å¾Œä¸€é¡Œèšç„¦åœ¨æµç¨‹æ•ˆç‡ï¼šæŠŠ AI è®Šæˆå·¥ä½œæµç¨‹çš„ä¸€ç’°ï¼Œè€Œä¸æ˜¯åªç•¶ä½œç©å…·ç”¨ä¸€æ¬¡å°±ä¸Ÿã€‚"
            }
        ];

        const COVER_IMAGE = "fengmian.jpg"; 

        function getImagePath(fileName) {
            return BASE_PATH + fileName;
        }

        function App() {
            const [gameState, setGameState] = React.useState('start');
            const [currentQIndex, setCurrentQIndex] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [userId, setUserId] = React.useState('');

            // è§£æç›¸é—œç‹€æ…‹
            const [showExplanation, setShowExplanation] = React.useState(false);
            const [lastIsCorrect, setLastIsCorrect] = React.useState(false);
            const [isLock, setIsLock] = React.useState(false);

            const activeTop = CLICK_AREA_TOP_PERCENT;
            const activeHeight = CLICK_AREA_HEIGHT_PERCENT;
            const activeLeft = CLICK_AREA_LEFT_PERCENT;
            const activeWidth = CLICK_AREA_WIDTH_PERCENT;

            React.useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const uid = params.get('uid');
                if (uid) setUserId(uid);
            }, []);

            const startGame = () => {
                setGameState('playing');
                setScore(0);
                setCurrentQIndex(0);
                setShowExplanation(false);
                setIsLock(false);
            };

            const handleAnswer = (optionIndex) => {
                if (isLock || showExplanation) return; // æ­£åœ¨é¡¯ç¤ºè§£ææ™‚ä¸è™•ç†
                const currentQ = QUESTIONS[currentQIndex];
                const isCorrect = optionIndex === currentQ.correct;

                setLastIsCorrect(isCorrect);
                setIsLock(true);

                if (isCorrect) {
                    setScore(prev => prev + 20);
                }

                // ç¨å¾®åœé “ä¸€ä¸‹å†è·³å‡ºè§£æï¼ˆè®“é»æ“Šæœ‰ä¸€é»ç¯€å¥æ„Ÿï¼‰
                setTimeout(() => {
                    setShowExplanation(true);
                }, 200);
            };

            const goNextQuestion = () => {
                const isLast = currentQIndex >= QUESTIONS.length - 1;
                if (isLast) {
                    setShowExplanation(false);
                    setGameState('result');
                    return;
                }

                setShowExplanation(false);
                // ç­‰æµ®å±¤æ”¶å›å»å†æ›é¡Œï¼Œé¿å…ç•«é¢çªå…€
                setTimeout(() => {
                    setCurrentQIndex(prev => prev + 1);
                    setIsLock(false);
                }, 200);
            };
            
            const submitScore = () => {
                const message = `ã€AdobeçŸ¥è­˜ç‹æŒ‘æˆ°ã€‘\næˆ‘æ˜¯ç”¨æˆ¶ï¼š${userId || 'Guest'}\næˆ‘åœ¨ Week 1 ç²å¾—äº†ï¼š${score} åˆ†ï¼`;
                window.location.href = `https://line.me/R/oaMessage/${LINE_BOT_ID}/?text=${encodeURIComponent(message)}`;
            };

            // ====== Start ç•«é¢ ======
            if (gameState === 'start') {
                return (
                    <div className="w-full h-screen bg-gray-900 flex flex-col items-center justify-center relative">
                        <div className="w-full max-w-md aspect-square relative shadow-2xl mb-8">
                            <img 
                                src={getImagePath(COVER_IMAGE)} 
                                className="w-full h-full object-cover rounded-lg" 
                                onError={(e)=>e.target.src='https://placehold.co/600x600/333/FFF?text=è«‹ç¢ºèªå°é¢åœ–'+COVER_IMAGE+'æª”å'} />
                        </div>
                        <button 
                            onClick={startGame} 
                            className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg animate-bounce">
                            é–‹å§‹æŒ‘æˆ°
                        </button>
                    </div>
                );
            }

            // ====== ä½œç­”ç•«é¢ ======
            if (gameState === 'playing') {
                const currentQ = QUESTIONS[currentQIndex];
                
                return (
                    <div className="w-full h-screen bg-gray-800 flex flex-col items-center justify-start py-4 overflow-hidden relative">
                        
                        {/* ä¸Šæ–¹é€²åº¦æ¢ & åˆ†æ•¸ */}
                        {/* åªæœ‰ç›®å‰åˆ†æ•¸ï¼Œä¸è¦é€²åº¦æ¢ */}
<div className="w-full max-w-md px-4 mb-2">
    <div className="flex items-center justify-end text-gray-200 text-sm">
        <span>ç›®å‰åˆ†æ•¸ï¼š{score}</span>
    </div>
</div>
                        <div className="w-full max-w-md relative mt-2 px-2"> 
                            <div className="relative flex justify-center w-full">
                                <img 
                                    src={getImagePath(currentQ.image)} 
                                    className="w-full h-auto object-contain shadow-xl block rounded-lg" 
                                    onError={(e)=>e.target.src='https://placehold.co/600x600/333/FFF?text=è«‹ç¢ºèªé¡Œç›®åœ–'+currentQ.image+'æª”å'} 
                                />

                                {/* é»æ“Šå€åŸŸ Container */}
                                <div 
                                    className="absolute grid grid-cols-2 grid-rows-2"
                                    style={{ 
                                        top: `${activeTop}%`, 
                                        height: `${activeHeight}%`,
                                        left: `${activeLeft}%`,
                                        width: `${activeWidth}%`
                                    }}
                                >
                                    <div onClick={() => handleAnswer(0)} className="touch-highlight flex items-center justify-center"></div>
                                    <div onClick={() => handleAnswer(1)} className="touch-highlight flex items-center justify-center"></div>
                                    <div onClick={() => handleAnswer(2)} className="touch-highlight flex items-center justify-center"></div>
                                    <div onClick={() => handleAnswer(3)} className="touch-highlight flex items-center justify-center"></div>
                                </div>
                            </div>
                        </div>

                        {/* è§£ææµ®å±¤ */}
                        <div className={`overlay ${showExplanation ? 'show' : ''}`}>
                            <div className="explanation-card">
                                <h2>
                                    {lastIsCorrect ? 'æ­£ç¢º â­•ï¸' : 'éŒ¯èª¤ âŒ'}
                                </h2>
                                <p>
                                    {QUESTIONS[currentQIndex].explanation}
                                </p>
                                <div className="explanation-footer">
                                    <span>ç¬¬ {currentQIndex + 1} é¡Œ / å…± {QUESTIONS.length} é¡Œ</span>
                                    <button 
                                        type="button" 
                                        className="explanation-next-btn"
                                        onClick={goNextQuestion}
                                    >
                                        {currentQIndex === QUESTIONS.length - 1 ? 'çœ‹çµæœ â–¶' : 'ä¸‹ä¸€é¡Œ â–¶'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // ====== çµæœç•«é¢ ======
            if (gameState === 'result') {
                return (
                    <div className="w-full h-screen bg-gray-900 flex flex-col items-center justify-center p-4 text-white">
                        <div className="text-sm mb-2 text-gray-300">æœ¬é€±æŒ‘æˆ°å®Œæˆï¼</div>
                        <div className="text-6xl font-black mb-2">{score} åˆ†</div>
                        <div className="mb-6 text-gray-300 text-sm">
                            æœ€é«˜åˆ† 100 åˆ†ï¼Œæ­¡è¿æŠŠæˆç¸¾å‚³å› LINE å’Œæˆ‘å€‘ç‚«è€€ä¸€ä¸‹ ğŸ‘€
                        </div>
                        <button 
                            onClick={submitScore} 
                            className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg">
                            ç™»è¨˜æˆç¸¾
                        </button>
                        <button 
                            onClick={()=>window.location.reload()} 
                            className="bg-gray-700 hover:bg-gray-600 text-white py-2.5 px-6 rounded-xl mt-4 text-sm">
                            å†ç©ä¸€æ¬¡
                        </button>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
